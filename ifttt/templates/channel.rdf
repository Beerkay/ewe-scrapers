<?xml version="1.0"?>

<!DOCTYPE rdf:RDF [ 
 <!ENTITY foaf "http://xmlns.com/foaf/0.1/" >
 <!ENTITY owl "http://www.w3.org/2002/07/owl#" > 
 <!ENTITY rdf "http://www.w3.org/1999/02/22-rdf-syntax-ns#" > 
 <!ENTITY ewe "http://gsi.dit.upm.es/ontologies/ewe/ns/" >
 <!ENTITY ewe-ifttt "http://gsi.dit.upm.es/ontologies/ewe/ifttt/ns/" >
 <!ENTITY xsd "http://www.w3.org/2001/XMLSchema#" >
 <!ENTITY rdfs "http://www.w3.org/2000/01/rdf-schema#" > 
 <!ENTITY dcterms "http://purl.org/dc/terms/" >
 <!ENTITY tags "http://www.holygoat.co.uk/owl/redwood/0.1/tags/" > 
]>

<rdf:RDF 
	xmlns:foaf="http://xmlns.com/foaf/0.1/" 
	xmlns:owl="http://www.w3.org/2002/07/owl#" 
	xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" 
	xmlns:ewe="http://gsi.dit.upm.es/ontologies/ewe/ns/" 
	xmlns:ewe-ifttt="http://gsi.dit.upm.es/ontologies/ewe/ifttt/ns/" 
	xmlns:xsd="http://www.w3.org/2001/XMLSchema#" 
	xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#" 
	xmlns:dcterms="http://purl.org/dc/terms/" 
	xmlns:tags="http://www.holygoat.co.uk/owl/redwood/0.1/tags/">
	
  <owl:Class rdf:about="http://gsi.dit.upm.es/ontologies/ewe/ifttt/ns/{{ item['class_name'] }}">
    <rdfs:subClassOf rdf:resource="http://gsi.dit.upm.es/ontologies/ewe/ns/Channel"/>
    <rdfs:seeAlso>
      <owl:Class>
        <foaf:url>{{ item['id'] }}</foaf:url>
      </owl:Class>
    </rdfs:seeAlso>
    {% if item['title'] -%}
    <rdfs:label xml:lang="en">{{ item['title'] }}</rdfs:label>
    <dcterms:title>{{ item['title'] }}</dcterms:title>
    {% endif -%}
    {% if item['description'] -%}
    <dcterms:description>{{ item['description'] }}</dcterms:description>
    {% endif -%}
    {% if item['commercial_url'] -%}
    <foaf:url>{{ item['commercial_url'] }}</foaf:url>
    {% endif -%}
    {% if item['logo'] -%}
    <foaf:logo>{{ item['logo'] }}</foaf:logo>
    {% endif -%}
    <!-- Event and action references -->
    {% for event in item['events_generated'] -%}
    <ewe:generatesEvent rdf:resource="{{event['id']}}" />
    {% endfor -%}
    {% for action in item['actions_provided'] -%}    
    <ewe:hasAction rdf:resource="{{action['id']}}" />
    {%- endfor %}
  </owl:Class>


  <!-- Event Listing -->
  {% for event in item['events_generated'] -%}
  <!-- Event -->  
  <owl:Class rdf:about="http://gsi.dit.upm.es/ontologies/ewe/ifttt/ns/{{ event['class_name'] }}">
    <rdfs:subClassOf rdf:resource="http://gsi.dit.upm.es/ontologies/ewe/ns/Event"/>
    <rdfs:seeAlso>
      <owl:Class>
        <foaf:url>{{ event['id'] }}</foaf:url>
      </owl:Class>
    </rdfs:seeAlso> 
    {% if event['title'] -%}
    <rdfs:label xml:lang="en">{{ event['title'] }}</rdfs:label> 
    <dcterms:title>{{ event['title'] }}</dcterms:title> 
    {% endif -%}
    {% if event['description'] -%}
    <dcterms:description>{{ event['description'] }}</dcterms:description>
    {% endif -%}
  </owl:Class>
  {% for oparam in event['output_parameters'] %}
  <owl:DatatypeProperty rdf:about="http://gsi.dit.upm.es/ontologies/ewe/ifttt/ns/{{ oparam['class_name'] }}">
    <rdfs:subPropertyOf rdf:resource="http://gsi.dit.upm.es/ontologies/ewe/ns/hasOutputParameter"/> 
    {% if oparam['title'] -%}
    <rdfs:label xml:lang="en">{{ oparam['title'] }}</rdfs:label> 
    {% endif -%}
    {% if oparam['description'] -%}
    <rdfs:comment xml:lang="en">{{ oparam['description'] }}</rdfs:comment> 
    {% endif -%}
    {% if oparam['example'] -%}
    <rdfs:comment xml:lang="en">Example: {{ oparam['example'] }}</rdfs:comment>
    {%- endif %}
    <rdfs:domain rdf:resource="http://gsi.dit.upm.es/ontologies/ewe/ifttt/ns/{{ event['class_name'] }}" />
  </owl:DatatypeProperty>
  {% endfor %}
  {% for iparam in event['input_parameters'] -%}
  <owl:DatatypeProperty rdf:about="http://gsi.dit.upm.es/ontologies/ewe/ifttt/ns/{{ iparam['class_name'] }}">
    <rdfs:subPropertyOf rdf:resource="http://gsi.dit.upm.es/ontologies/ewe/ns/hasInputParameter"/> 
    {% if iparam['title'] -%}
    <rdfs:label xml:lang="en">{{ iparam['title'] }}</rdfs:label> 
    {%- endif %}
    {% if iparam['description'] -%}
    <rdfs:comment xml:lang="en">E{{ iparam['description'] }}</rdfs:comment> 
    {%- endif %}
    <rdfs:domain rdf:resource="http://gsi.dit.upm.es/ontologies/ewe/ifttt/ns/{{ event['class_name'] }}" />
  </owl:DatatypeProperty >
  {%- endfor %}

  {% endfor -%}
  <!-- Action Listing -->
  {% for action in item['actions_provided'] -%}
  <!-- Action -->
  <owl:Class rdf:about="http://gsi.dit.upm.es/ontologies/ewe/ifttt/ns/{{ action['class_name'] }}">
    <rdfs:subPropertyOf rdf:resource="http://gsi.dit.upm.es/ontologies/ewe/ns/Action"/>
    <rdfs:seeAlso>
      <owl:Class>
        <foaf:url>{{ action['id'] }}</foaf:url>
      </owl:Class>
    </rdfs:seeAlso> 
    {% if action['title'] -%}
    <rdfs:label xml:lang="en">{{ action['title'] }}</rdfs:label> 
    {%- endif %}
    {% if action['description'] -%}
    <rdfs:comment xml:lang="en">{{ action['description'] }}</rdfs:comment>
    {%- endif %}
  </owl:Class>
  {% for oparam in action['output_parameters'] %}
  <owl:DatatypeProperty rdf:about="http://gsi.dit.upm.es/ontologies/ewe/ifttt/ns/{{ oparam['class_name'] }}">
    <rdfs:subPropertyOf rdf:resource="http://gsi.dit.upm.es/ontologies/ewe/ns/hasOutputParameter"/> 
    {% if oparam['title'] -%}
    <rdfs:label xml:lang="en">{{ oparam['title'] }}</rdfs:label> 
    {%- endif %}
    {% if oparam['description'] -%}
    <rdfs:comment xml:lang="en">{{ oparam['description'] }}</rdfs:comment>
    {% endif -%}
    <rdfs:domain rdf:resource="http://gsi.dit.upm.es/ontologies/ewe/ifttt/ns/{{ action['class_name'] }}" />
  </owl:DatatypeProperty >
  {% endfor %}
  {% for iparam in action['input_parameters'] -%}
  <owl:DatatypeProperty rdf:about="http://gsi.dit.upm.es/ontologies/ewe/ifttt/ns/{{ iparam['class_name'] }}" >
    <rdfs:subPropertyOf rdf:resource="http://gsi.dit.upm.es/ontologies/ewe/ns/hasInputParameter"/> 
    {% if iparam['title'] -%}
    <rdfs:label xml:lang="en">{{ iparam['title'] }}</rdfs:label> 
    {%- endif %}
    {% if iparam['description'] -%}
    <rdfs:comment xml:lang="en">{{ iparam['description'] }}</rdfs:comment>
    {% endif -%}
    <rdfs:domain rdf:resource="http://gsi.dit.upm.es/ontologies/ewe/ifttt/ns/{{ action['class_name'] }}" />
  </owl:DatatypeProperty >
  {%- endfor %}
  {% endfor %}
</rdf:RDF>
